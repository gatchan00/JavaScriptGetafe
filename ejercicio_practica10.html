<html>
<script type="text/javascript">
var arrayUsuarios=[];
function insertaUsuario(){
	var name=document.getElementById("name").value;
	var apellidos=document.getElementById("apellidos").value;
	var preferencias=document.getElementById("preferencias").value;
	//1- mirar si ya existe ese objeto
	var usuario;
	for (var i=0;i<arrayUsuarios.length;i++){
		if (arrayUsuarios[i].name==name && arrayUsuarios[i].apellidos==apellidos){
			usuario=arrayUsuarios[i];
		}
	}
	if (usuario==null){
		usuario={};
		usuario.name=name;
		usuario.apellidos=apellidos;
		usuario.preferencias=[];
		arrayUsuarios.push(usuario);
	}
	usuario.preferencias.push(preferencias);
	
	
}

function mostrarConsola(){
console.log(JSON.stringify(arrayUsuarios));
}
</script>
<body>
<input id="name" type="text" value="nombre">
<input id="apellidos" type="text" value="apellidos">
<input id="preferencias" type="text" value="preferencias">
<button type="button" onclick="insertaUsuario()"> Insertar</button>
 <button type="button" onclick="mostrarConsola()"> Mostrar</button>
 
</body>
</html>
